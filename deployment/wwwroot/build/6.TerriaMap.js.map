{"version":3,"sources":["webpack:///./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx","webpack:///./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx","webpack:///./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx","webpack:///./node_modules/terriajs/wwwroot/images/difference-pin.png"],"names":["dateFormat","require","DiffTool","action","bound","observer","this","userSelectedSourceItem","props","sourceItem","Promise","all","createSplitItem","ImagerySplitDirection","LEFT","RIGHT","leftItem","rightItem","runInAction","removeSplitItem","splitterItemsDisposer","reaction","removeSplitterItems","createSplitterItems","fireImmediately","viewState","terria","originalSettings","showSplitter","isMapFullScreen","setIsMapFullScreen","setTrait","CommonStrata","user","mapNavigationModel","show","CLOSE_TOOL_ID","closeTool","findItem","controller","activate","hide","deactivate","enterDiffTool","leaveDiffTool","Main","theme","changeSourceItem","React","Component","observable","computed","createRef","t","_locationPickError","title","beforePick","afterPick","location","longitude","latitude","digits","name","firstDate","leftDate","secondDate","rightDate","d1","d2","workbench","items","filter","item","DiffableMixin","isMixedInto","canDiffImages","diffItem","styleSelectableDimensions","selectedId","diffStyleId","availableDiffStyles","map","options","find","style","id","currentDiscreteJulianDate","diffStyle","getLegendUrlForStyle","previewStyle","model","hasOpacity","e","newSourceItem","diffableItemsInWorkbench","uniqueId","target","value","styleId","setDimensionValue","pickingLocation","_isPickingNewLocation","pickedFeatures","pickedLocation","feature","features","f","doesFeatureBelongToItem","setTimeFilterFeature","providerCoords","hideItem","undefined","overlays","remove","add","diffItemName","showDiffImage","clearDiffImage","setDefaultDiffStyle","markerLocation","getMarkerLocation","MappableMixin","part","mapItems","p","ImageryParts","is","imageryProvider","promises","setTimeFilterFromLocation","some","ok","removeMarker","timeFilterCoordinates","height","setLocationFromActiveSearch","isShowingDiff","datesSelected","isReadyToGenerateDiff","large","DiffAccordion","MainPanel","styledMaxHeight","bottomDockHeight","centered","left","transparentBg","onClick","resetTool","textLight","BoxSpan","light","styledWidth","glyph","GLYPHS","arrowDown","TextSpan","noFontSize","bottom","medium","LocationAndDatesDisplayBox","textLightDimmed","small","column","alignItemsFlexStart","RawButton","ref","openLeftDatePickerButton","isLink","openRightDatePickerButton","unsetDates","Selector","onChange","label","disabled","key","spacingBottom","changePreviewStyle","previewLegendUrl","LegendImage","width","src","changeDiffStyle","diffLegendUrl","GenerateButton","generateDiff","aria-describedby","CloseDifferenceButton","primary","rounded","textProps","semiBold","extraLarge","activeStyles","renderIcon","StyledIcon","closeLight","iconProps","css","onPicking","onUserPickingLocation","onPicked","onUserPickLocation","ReactDOM","createPortal","fullWidth","wrap","backgroundColor","dark","heading","externalOpenButton","onDateSet","showItem","AreaFilterSelection","isPickingNewLocation","document","getElementById","DiffAccordionToggle","Box","borderRadiusTop","radius40Button","useState","showChildren","setShowChildren","useTheme","DiffAccordionWrapper","paddedVertically","paddedHorizontally","justifySpaceBetween","colorSecondary","difference","right","styledFontSize","styledLineHeight","uppercase","paddedRatio","opened","closed","children","attrs","position","parseInt","workbenchWidth","overflowY","borderRadiusBottom","darkWithOverlay","BackButton","Button","secondary","splitter","parseCustomMarkdownToReactWithOptions","injectTermsAsTooltips","tooltipTerms","configParameters","helpContentTerms","locationText","styledMinWidth","location2","styledMinHeight","extraExtraLarge","bold","message","textAlignCenter","charcoalGreyBg","display","marginTop","onLoad","onError","splitDirection","SplitItemReference","addModel","loadReference","Error","newItem","trueColor","search","availableStyles","length","sourceReference","contains","removeModelReferences","imageryLayer","m","im","carto","Cartographic","CesiumMath","toRadians","tile","tilingScheme","positionToTileXY","tileCoords","x","y","level","RasterLayerTraits","withTranslation","withTheme","md","DatePicker","date","JulianDate","toDate","currentDate","formatDateTime","isOpen","stopPropagation","toISOString","moveToPreviousDiscreteTime","moveToNextDiscreteTime","event","setIsOpen","current","addEventListener","onClickExternalButton","removeEventListener","registerExternalButtonClick","prevProps","unregisterExternalButtonClick","flex","Icon","calendar2","PrevButton","isPreviousDiscreteTimeAvailable","moveToPreviousDate","DateButton","toggleOpen","formattedCurrentDate","NextButton","isNextDiscreteTimeAvailable","moveToNextDate","dates","objectifiedDates","changeCurrentDate","openDirection","onOpen","onClose","PagerButton","colorPrimary","centerWithFlex","borderRadiusLeft","borderRadiusRight","lg","LocationPicker","pickMode","MapInteractionMode","messageAsNode","uiMode","UIMode","Difference","mode","mapInteractionModeStack","push","addInteractionModeToMap","showMarker","pickDisposer","newPick","pickPosition","customUi","cartesian","Ellipsoid","WGS84","cartesianToCartographic","toDegrees","currentPick","allFeaturesAvailablePromise","then","slice","pop","removeInteractionModeFromMap","setupPicker","destroyPicker","addMarker","customMarkerIcon","module","exports"],"mappings":"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","file":"6.TerriaMap.js","sourcesContent":["import hoistStatics from \"hoist-non-react-statics\";\nimport { TFunction } from \"i18next\";\nimport { action, computed, observable, reaction, runInAction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { IDisposer } from \"mobx-utils\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport styled, { DefaultTheme, useTheme, withTheme } from \"styled-components\";\nimport Cartographic from \"terriajs-cesium/Source/Core/Cartographic\";\nimport createGuid from \"terriajs-cesium/Source/Core/createGuid\";\nimport JulianDate from \"terriajs-cesium/Source/Core/JulianDate\";\nimport CesiumMath from \"terriajs-cesium/Source/Core/Math\";\nimport ImageryProvider from \"terriajs-cesium/Source/Scene/ImageryProvider\";\nimport ImagerySplitDirection from \"terriajs-cesium/Source/Scene/ImagerySplitDirection\";\nimport filterOutUndefined from \"../../../Core/filterOutUndefined\";\nimport isDefined from \"../../../Core/isDefined\";\nimport LatLonHeight from \"../../../Core/LatLonHeight\";\nimport PickedFeatures from \"../../../Map/PickedFeatures\";\nimport prettifyCoordinates from \"../../../Map/prettifyCoordinates\";\nimport DiffableMixin from \"../../../ModelMixins/DiffableMixin\";\nimport MappableMixin, {\n  ImageryParts\n} from \"../../../ModelMixins/MappableMixin\";\nimport CommonStrata from \"../../../Models/Definition/CommonStrata\";\nimport Feature from \"../../../Models/Feature\";\nimport hasTraits, { HasTrait } from \"../../../Models/Definition/hasTraits\";\nimport {\n  getMarkerLocation,\n  removeMarker\n} from \"../../../Models/LocationMarkerUtils\";\nimport { DimensionOption } from \"../../../Models/SelectableDimensions\";\nimport SplitItemReference from \"../../../Models/Catalog/CatalogReferences/SplitItemReference\";\nimport Terria from \"../../../Models/Terria\";\nimport ViewState from \"../../../ReactViewModels/ViewState\";\nimport Box, { BoxSpan } from \"../../../Styled/Box\";\nimport Button, { RawButton } from \"../../../Styled/Button\";\nimport Select from \"../../../Styled/Select\";\nimport Spacing from \"../../../Styled/Spacing\";\nimport Text, { TextSpan } from \"../../../Styled/Text\";\nimport RasterLayerTraits from \"../../../Traits/TraitsClasses/RasterLayerTraits\";\nimport { parseCustomMarkdownToReactWithOptions } from \"../../Custom/parseCustomMarkdownToReact\";\nimport { GLYPHS, StyledIcon } from \"../../../Styled/Icon\";\nimport Loader from \"../../Loader\";\nimport DatePicker from \"./DatePicker\";\nimport LocationPicker from \"./LocationPicker\";\nimport { CLOSE_TOOL_ID } from \"../../Map/Navigation/registerMapNavigations\";\n\nconst dateFormat = require(\"dateformat\");\n\ntype DiffableItem = DiffableMixin.Instance;\n\ninterface PropsType extends WithTranslation {\n  viewState: ViewState;\n  sourceItem: DiffableItem;\n  theme: DefaultTheme;\n}\n\n@observer\nclass DiffTool extends React.Component<PropsType> {\n  static readonly toolName = \"Image Difference\";\n\n  @observable private leftItem?: DiffableItem;\n  @observable private rightItem?: DiffableItem;\n  @observable private userSelectedSourceItem?: DiffableItem;\n\n  private splitterItemsDisposer?: IDisposer;\n  private originalSettings: any;\n\n  @computed\n  get sourceItem(): DiffableItem {\n    return this.userSelectedSourceItem || this.props.sourceItem;\n  }\n\n  @action.bound\n  changeSourceItem(sourceItem: DiffableItem) {\n    this.userSelectedSourceItem = sourceItem;\n  }\n\n  @action\n  async createSplitterItems() {\n    try {\n      const [leftItem, rightItem] = await Promise.all([\n        createSplitItem(this.sourceItem, ImagerySplitDirection.LEFT),\n        createSplitItem(this.sourceItem, ImagerySplitDirection.RIGHT)\n      ]);\n      runInAction(() => {\n        this.leftItem = leftItem;\n        this.rightItem = rightItem;\n      });\n    } catch {}\n  }\n\n  @action\n  removeSplitterItems() {\n    this.leftItem && removeSplitItem(this.leftItem);\n    this.rightItem && removeSplitItem(this.rightItem);\n  }\n\n  @action\n  enterDiffTool() {\n    // Start the reaction that splits the sourceItem into left & right items\n    this.splitterItemsDisposer = reaction(\n      () => this.sourceItem,\n      () => {\n        this.removeSplitterItems();\n        this.createSplitterItems();\n      },\n      { fireImmediately: true }\n    );\n\n    const viewState = this.props.viewState;\n    const terria = viewState.terria;\n    this.originalSettings = {\n      showSplitter: terria.showSplitter,\n      isMapFullScreen: viewState.isMapFullScreen\n    };\n    terria.showSplitter = true;\n    viewState.setIsMapFullScreen(true);\n    this.sourceItem.setTrait(CommonStrata.user, \"show\", false);\n    terria.mapNavigationModel.show(CLOSE_TOOL_ID);\n    const closeTool = terria.mapNavigationModel.findItem(CLOSE_TOOL_ID);\n    if (closeTool) {\n      closeTool.controller.activate();\n    }\n  }\n\n  @action\n  leaveDiffTool() {\n    const viewState = this.props.viewState;\n    const terria = viewState.terria;\n    const originalSettings = this.originalSettings;\n    this.removeSplitterItems();\n    this.splitterItemsDisposer?.();\n    terria.showSplitter = originalSettings.showSplitter;\n    viewState.setIsMapFullScreen(originalSettings.isMapFullScreen);\n    this.sourceItem.setTrait(CommonStrata.user, \"show\", true);\n    terria.mapNavigationModel.hide(CLOSE_TOOL_ID);\n    const closeTool = terria.mapNavigationModel.findItem(CLOSE_TOOL_ID);\n    if (closeTool) {\n      closeTool.controller.deactivate();\n    }\n  }\n\n  componentDidMount() {\n    this.enterDiffTool();\n  }\n\n  componentWillUnmount() {\n    this.leaveDiffTool();\n  }\n\n  render() {\n    if (this.leftItem && this.rightItem) {\n      return (\n        <Main\n          {...this.props}\n          theme={this.props.theme}\n          terria={this.props.viewState.terria}\n          sourceItem={this.sourceItem}\n          changeSourceItem={this.changeSourceItem}\n          leftItem={this.leftItem}\n          rightItem={this.rightItem}\n        />\n      );\n    } else return null;\n  }\n}\n\ninterface MainPropsType extends PropsType {\n  terria: Terria;\n  leftItem: DiffableItem;\n  rightItem: DiffableItem;\n  changeSourceItem: (newSourceItem: DiffableItem) => void;\n}\n\n@observer\nclass Main extends React.Component<MainPropsType> {\n  @observable private location?: LatLonHeight;\n  @observable private _locationPickError = false;\n  @observable private _isPickingNewLocation = false;\n\n  private openLeftDatePickerButton: React.RefObject<\n    HTMLButtonElement\n  > = React.createRef();\n  private openRightDatePickerButton: React.RefObject<\n    HTMLButtonElement\n  > = React.createRef();\n\n  constructor(props: MainPropsType) {\n    super(props);\n  }\n\n  @computed\n  get locationPickerMessages() {\n    const t = this.props.t;\n    if (this._locationPickError) {\n      return {\n        title: t(\"diffTool.locationPicker.errorMessages.title\"),\n        beforePick: t(\"diffTool.locationPicker.errorMessages.beforePick\"),\n        afterPick: t(\"diffTool.locationPicker.errorMessages.afterPick\")\n      };\n    } else if (this.location) {\n      return {\n        title: t(\n          \"diffTool.locationPicker.nextMessages.title\",\n          prettifyCoordinates(this.location.longitude, this.location.latitude, {\n            digits: 2\n          })\n        ),\n        beforePick: t(\"diffTool.locationPicker.nextMessages.beforePick\"),\n        afterPick: t(\"diffTool.locationPicker.nextMessages.afterPick\")\n      };\n    } else {\n      return {\n        title: t(\"diffTool.locationPicker.initialMessages.title\"),\n        beforePick: t(\"diffTool.locationPicker.initialMessages.beforePick\"),\n        afterPick: t(\"diffTool.locationPicker.initialMessages.afterPick\")\n      };\n    }\n  }\n\n  @computed\n  get diffItem() {\n    return this.props.leftItem;\n  }\n\n  @computed\n  get diffItemName() {\n    const name = this.props.sourceItem.name || \"\";\n    const firstDate = this.leftDate;\n    const secondDate = this.rightDate;\n    const format = \"yyyy/mm/dd\";\n    if (!firstDate || !secondDate) {\n      return name;\n    } else {\n      const d1 = dateFormat(firstDate, format);\n      const d2 = dateFormat(secondDate, format);\n      return `${name} - difference for dates ${d1}, ${d2}`;\n    }\n  }\n\n  @computed\n  get diffableItemsInWorkbench(): DiffableItem[] {\n    return this.props.terria.workbench.items.filter(\n      item => DiffableMixin.isMixedInto(item) && item.canDiffImages\n    ) as DiffableItem[];\n  }\n\n  @computed\n  get previewStyle(): string | undefined {\n    return this.diffItem.styleSelectableDimensions?.[0]?.selectedId;\n  }\n\n  @computed\n  get diffStyle(): string | undefined {\n    return this.diffItem.diffStyleId;\n  }\n\n  @computed\n  get availableDiffStyles(): DimensionOption[] {\n    return filterOutUndefined(\n      this.diffItem.availableDiffStyles.map(diffStyleId =>\n        this.diffItem.styleSelectableDimensions?.[0]?.options?.find(\n          style => style.id === diffStyleId\n        )\n      )\n    );\n  }\n\n  @computed\n  get leftDate(): JulianDate | undefined {\n    return this.props.leftItem.currentDiscreteJulianDate;\n  }\n\n  @computed\n  get rightDate(): JulianDate | undefined {\n    return this.props.rightItem.currentDiscreteJulianDate;\n  }\n\n  @computed\n  get diffLegendUrl(): string | undefined {\n    return (\n      this.diffStyle &&\n      this.leftDate &&\n      this.rightDate &&\n      this.diffItem.getLegendUrlForStyle(\n        this.diffStyle,\n        this.leftDate,\n        this.rightDate\n      )\n    );\n  }\n\n  @computed\n  get previewLegendUrl(): string | undefined {\n    return (\n      this.previewStyle && this.diffItem.getLegendUrlForStyle(this.previewStyle)\n    );\n  }\n\n  @action\n  showItem(model: DiffableItem) {\n    // We change the opacity instead of setting `show` to true/false, because\n    // we want the item to be on the map for date selection to work\n    hasOpacity(model) && model.setTrait(CommonStrata.user, \"opacity\", 0.8);\n  }\n\n  @action\n  hideItem(model: DiffableItem) {\n    // We change the opacity instead of setting `show` to true/false, because\n    // we want the item to be on the map for date selection to work\n    hasOpacity(model) && model.setTrait(CommonStrata.user, \"opacity\", 0);\n  }\n\n  @action.bound\n  changeSourceItem(e: React.ChangeEvent<HTMLSelectElement>) {\n    const newSourceItem = this.diffableItemsInWorkbench.find(\n      item => item.uniqueId === e.target.value\n    );\n    if (newSourceItem) this.props.changeSourceItem(newSourceItem);\n  }\n\n  @action.bound\n  changePreviewStyle(e: React.ChangeEvent<HTMLSelectElement>) {\n    const styleId = e.target.value;\n    this.props.leftItem.styleSelectableDimensions?.[0]?.setDimensionValue(\n      CommonStrata.user,\n      styleId\n    );\n    this.props.rightItem.styleSelectableDimensions?.[0]?.setDimensionValue(\n      CommonStrata.user,\n      styleId\n    );\n  }\n\n  @action.bound\n  changeDiffStyle(e: React.ChangeEvent<HTMLSelectElement>) {\n    this.diffItem.setTrait(CommonStrata.user, \"diffStyleId\", e.target.value);\n  }\n\n  @action.bound\n  onUserPickingLocation(pickingLocation: LatLonHeight) {\n    this._isPickingNewLocation = true;\n  }\n\n  @action.bound\n  onUserPickLocation(\n    pickedFeatures: PickedFeatures,\n    pickedLocation: LatLonHeight\n  ) {\n    const { leftItem, rightItem, t } = this.props;\n    const feature = pickedFeatures.features.find(\n      f =>\n        doesFeatureBelongToItem(f as Feature, leftItem) ||\n        doesFeatureBelongToItem(f as Feature, rightItem)\n    );\n\n    if (feature) {\n      leftItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n      rightItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n      this.location = pickedLocation;\n      this._locationPickError = false;\n    } else {\n      this._locationPickError = true;\n    }\n    this._isPickingNewLocation = false;\n  }\n\n  @action.bound\n  unsetDates() {\n    const { leftItem, rightItem } = this.props;\n    leftItem.setTrait(CommonStrata.user, \"currentTime\", null);\n    rightItem.setTrait(CommonStrata.user, \"currentTime\", null);\n    this.hideItem(leftItem);\n    this.hideItem(rightItem);\n  }\n\n  @action.bound\n  generateDiff() {\n    if (\n      this.leftDate === undefined ||\n      this.rightDate === undefined ||\n      this.diffStyle === undefined\n    ) {\n      return;\n    }\n\n    const terria = this.props.terria;\n    terria.overlays.remove(this.props.leftItem);\n    terria.overlays.remove(this.props.rightItem);\n    terria.workbench.add(this.diffItem);\n\n    this.diffItem.setTrait(CommonStrata.user, \"name\", this.diffItemName);\n    this.diffItem.showDiffImage(this.leftDate, this.rightDate, this.diffStyle);\n    terria.showSplitter = false;\n  }\n\n  @action.bound\n  resetTool() {\n    const terria = this.props.terria;\n    this.diffItem.clearDiffImage();\n    setDefaultDiffStyle(this.diffItem);\n    terria.overlays.add(this.props.leftItem);\n    terria.overlays.add(this.props.rightItem);\n    terria.workbench.remove(this.diffItem);\n    this.props.terria.showSplitter = true;\n    this.props.leftItem.setTrait(\n      CommonStrata.user,\n      \"splitDirection\",\n      ImagerySplitDirection.LEFT\n    );\n    this.props.rightItem.setTrait(\n      CommonStrata.user,\n      \"splitDirection\",\n      ImagerySplitDirection.RIGHT\n    );\n  }\n\n  @action\n  async setLocationFromActiveSearch() {\n    // Look for any existing marker like from a search result and filter\n    // imagery at that location\n    const markerLocation = getMarkerLocation(this.props.terria);\n    const sourceItem = this.props.sourceItem;\n    if (markerLocation && MappableMixin.isMixedInto(sourceItem)) {\n      const part = sourceItem.mapItems.find(p => ImageryParts.is(p));\n      const imageryProvider =\n        part && ImageryParts.is(part) && part.imageryProvider;\n      if (imageryProvider) {\n        const promises = [\n          setTimeFilterFromLocation(\n            this.props.leftItem,\n            markerLocation,\n            imageryProvider\n          ),\n          setTimeFilterFromLocation(\n            this.props.rightItem,\n            markerLocation,\n            imageryProvider\n          )\n        ];\n        const someSuccessful = (await Promise.all(promises)).some(ok => ok);\n        if (someSuccessful) {\n          runInAction(() => (this.location = markerLocation));\n        } else {\n          // If we cannot resolve imagery at the marker location, remove it\n          removeMarker(this.props.terria);\n        }\n      }\n    }\n  }\n\n  @action\n  async componentDidMount() {\n    if (this.location === undefined) {\n      const {\n        latitude,\n        longitude,\n        height\n      } = this.diffItem.timeFilterCoordinates;\n      if (latitude !== undefined && longitude !== undefined) {\n        this.location = {\n          latitude,\n          longitude,\n          height\n        };\n        // remove any active search location marker to avoid showing two markers\n        removeMarker(this.props.terria);\n      } else {\n        await this.setLocationFromActiveSearch();\n      }\n    }\n  }\n\n  // i want to restructure the render so that there's 2 distinct \"showing diff\"\n  // or not states, right now intertwining them means way too many conditionals\n  // that confuse the required spacing etc.\n  render() {\n    const { terria, viewState, sourceItem, t, theme } = this.props;\n    const isShowingDiff = this.diffItem.isShowingDiff;\n    const datesSelected = this.leftDate && this.rightDate;\n    const isReadyToGenerateDiff =\n      this.location && datesSelected && this.diffStyle !== undefined;\n\n    return (\n      <Text large>\n        <DiffAccordion viewState={viewState} t={t}>\n          <MainPanel\n            isMapFullScreen={viewState.isMapFullScreen}\n            styledMaxHeight={`calc(100vh - ${viewState.bottomDockHeight}px - 150px)`}\n          >\n            {isShowingDiff && (\n              <>\n                <Box centered left>\n                  <BackButton\n                    css={`\n                      color: ${theme.textLight};\n                      border-color: ${theme.textLight};\n                    `}\n                    transparentBg\n                    onClick={this.resetTool}\n                  >\n                    <BoxSpan centered>\n                      <StyledIcon\n                        css=\"transform:rotate(90deg);\"\n                        light\n                        styledWidth=\"16px\"\n                        glyph={GLYPHS.arrowDown}\n                      />\n                      <TextSpan noFontSize>{t(\"general.back\")}</TextSpan>\n                    </BoxSpan>\n                  </BackButton>\n                </Box>\n                <Spacing bottom={3} />\n                <Text medium textLight>\n                  {t(\"diffTool.differenceResultsTitle\")}\n                </Text>\n                <Spacing bottom={2} />\n              </>\n            )}\n            <Text textLight>{t(\"diffTool.instructions.paneDescription\")}</Text>\n            <Spacing bottom={3} />\n            <LocationAndDatesDisplayBox>\n              <Box>\n                <Text medium>{t(\"diffTool.labels.area\")}:</Text>\n                <div>\n                  <Text medium textLightDimmed={!this.location}>\n                    {this.location\n                      ? t(\"diffTool.locationDisplay.locationSelected.title\")\n                      : t(\"diffTool.locationDisplay.noLocationSelected.title\")}\n                  </Text>\n                  <Text light textLight small>\n                    {this.location\n                      ? t(\n                          \"diffTool.locationDisplay.locationSelected.description\"\n                        )\n                      : t(\n                          \"diffTool.locationDisplay.noLocationSelected.description\"\n                        )}\n                  </Text>\n                </div>\n              </Box>\n              <Box>\n                <Text medium>{t(\"diffTool.labels.dates\")}:</Text>\n                <Box column alignItemsFlexStart>\n                  {this.leftDate && (\n                    <Text large>\n                      (A) {dateFormat(this.leftDate, \"dd/mm/yyyy\")}\n                    </Text>\n                  )}\n                  {!this.leftDate && (\n                    <RawButton ref={this.openLeftDatePickerButton}>\n                      <TextSpan isLink small>\n                        {t(\"diffTool.instructions.setDateA\")}\n                      </TextSpan>\n                    </RawButton>\n                  )}\n                  <Spacing bottom={1} />\n                  {this.rightDate && (\n                    <Text large>\n                      (B) {dateFormat(this.rightDate, \"dd/mm/yyyy\")}\n                    </Text>\n                  )}\n                  {!this.rightDate && (\n                    <RawButton ref={this.openRightDatePickerButton}>\n                      <TextSpan isLink small>\n                        {t(\"diffTool.instructions.setDateB\")}\n                      </TextSpan>\n                    </RawButton>\n                  )}\n                  {isShowingDiff === false && this.leftDate && this.rightDate && (\n                    <RawButton onClick={this.unsetDates}>\n                      <TextSpan isLink small>\n                        {t(\"diffTool.instructions.changeDates\")}\n                      </TextSpan>\n                    </RawButton>\n                  )}\n                </Box>\n              </Box>\n            </LocationAndDatesDisplayBox>\n            {!isShowingDiff && (\n              <>\n                <Spacing bottom={4} />\n                <Selector\n                  viewState={viewState}\n                  value={sourceItem.uniqueId}\n                  onChange={this.changeSourceItem}\n                  label={t(\"diffTool.labels.sourceDataset\")}\n                >\n                  <option disabled>Select source item</option>\n                  {this.diffableItemsInWorkbench.map(item => (\n                    <option key={item.uniqueId} value={item.uniqueId}>\n                      {item.name}\n                    </option>\n                  ))}\n                </Selector>\n              </>\n            )}\n            {!isShowingDiff && (\n              <>\n                <Spacing bottom={4} />\n                <Selector\n                  viewState={viewState}\n                  spacingBottom\n                  value={this.previewStyle}\n                  onChange={this.changePreviewStyle}\n                  label={t(\"diffTool.labels.previewStyle\")}\n                >\n                  <option disabled value=\"\">\n                    {t(\"diffTool.choosePreview\")}\n                  </option>\n                  {this.diffItem.styleSelectableDimensions?.[0]?.options?.map(\n                    style => (\n                      <option key={style.id} value={style.id}>\n                        {style.name}\n                      </option>\n                    )\n                  )}\n                </Selector>\n                {this.previewLegendUrl && (\n                  <>\n                    <Spacing bottom={2} />\n                    <LegendImage width=\"100%\" src={this.previewLegendUrl} />\n                  </>\n                )}\n              </>\n            )}\n            <Spacing bottom={2} />\n            <Selector\n              viewState={viewState}\n              value={this.diffStyle || \"\"}\n              onChange={this.changeDiffStyle}\n              label={t(\"diffTool.labels.differenceOutput\")}\n            >\n              <option disabled value=\"\">\n                {t(\"diffTool.chooseDifference\")}\n              </option>\n              {this.availableDiffStyles.map(style => (\n                <option key={style.id} value={style.id}>\n                  {style.name}\n                </option>\n              ))}\n            </Selector>\n            {isShowingDiff && this.diffLegendUrl && (\n              <>\n                <LegendImage width=\"100%\" src={this.diffLegendUrl} />\n                <Spacing bottom={4} />\n              </>\n            )}\n            {!isShowingDiff && (\n              <>\n                <Spacing bottom={4} />\n                <GenerateButton\n                  onClick={this.generateDiff}\n                  disabled={!isReadyToGenerateDiff}\n                  aria-describedby=\"TJSDifferenceDisabledButtonPrompt\"\n                >\n                  <TextSpan large>\n                    {t(\"diffTool.labels.generateDiffButtonText\")}\n                  </TextSpan>\n                </GenerateButton>\n\n                {!isReadyToGenerateDiff && (\n                  <>\n                    <Spacing bottom={3} />\n                    <Text\n                      small\n                      light\n                      textLight\n                      id=\"TJSDifferenceDisabledButtonPrompt\"\n                    >\n                      {t(\"diffTool.labels.disabledButtonPrompt\")}\n                    </Text>\n                    <Spacing bottom={4} />\n                  </>\n                )}\n              </>\n            )}\n          </MainPanel>\n        </DiffAccordion>\n        {isShowingDiff && (\n          <CloseDifferenceButton\n            primary\n            rounded\n            textProps={{\n              semiBold: true,\n              extraLarge: true\n            }}\n            theme={theme}\n            activeStyles\n            onClick={this.resetTool}\n            renderIcon={() => (\n              <StyledIcon light styledWidth=\"13px\" glyph={GLYPHS.closeLight} />\n            )}\n            iconProps={{\n              css: `margin-right: 10px;`\n            }}\n          >\n            Close\n          </CloseDifferenceButton>\n        )}\n        {!isShowingDiff && (\n          <LocationPicker\n            terria={terria}\n            location={this.location}\n            onPicking={this.onUserPickingLocation}\n            onPicked={this.onUserPickLocation}\n          />\n        )}\n        {!isShowingDiff &&\n          ReactDOM.createPortal(\n            // Bottom Panel\n            <Box centered fullWidth wrap backgroundColor={theme.dark}>\n              <DatePicker\n                heading={t(\"diffTool.labels.dateComparisonA\")}\n                item={this.props.leftItem}\n                externalOpenButton={this.openLeftDatePickerButton}\n                onDateSet={() => this.showItem(this.props.leftItem)}\n              />\n              <AreaFilterSelection\n                t={t}\n                location={this.location}\n                isPickingNewLocation={this._isPickingNewLocation}\n              />\n              <DatePicker\n                heading={t(\"diffTool.labels.dateComparisonB\")}\n                item={this.props.rightItem}\n                externalOpenButton={this.openRightDatePickerButton}\n                onDateSet={() => this.showItem(this.props.rightItem)}\n              />\n            </Box>,\n            document.getElementById(\"TJS-BottomDockPortalForTool\")!\n          )}\n      </Text>\n    );\n  }\n}\n\ninterface DiffAccordionProps {\n  viewState: ViewState;\n  t: TFunction;\n}\n\nconst DiffAccordionToggle = styled(Box)`\n  ${({ theme }) => theme.borderRadiusTop(theme.radius40Button)}\n`;\n\nconst DiffAccordion: React.FC<DiffAccordionProps> = props => {\n  const [showChildren, setShowChildren] = useState(true);\n  const { t, viewState } = props;\n  const theme = useTheme();\n  return (\n    <DiffAccordionWrapper isMapFullScreen={viewState.isMapFullScreen} column>\n      {/* Diff header */}\n      <DiffAccordionToggle\n        paddedVertically\n        paddedHorizontally={2}\n        centered\n        justifySpaceBetween\n        backgroundColor={theme.colorSecondary}\n      >\n        <Box centered>\n          <StyledIcon styledWidth=\"20px\" light glyph={GLYPHS.difference} />\n          <Spacing right={1} />\n          <Text\n            textLight\n            semiBold\n            // font-size is non standard with what we have so far in terria,\n            // lineheight as well to hit nonstandard paddings\n            styledFontSize=\"17px\"\n            styledLineHeight=\"30px\"\n          >\n            {t(\"diffTool.title\")}\n          </Text>\n        </Box>\n        {/* margin-right 5px for the padded button offset - larger click area\n            but visible should be inline with rest of box */}\n        <Box centered css={\"margin-right:-5px;\"}>\n          <RawButton onClick={() => viewState.closeTool()}>\n            <Text textLight small semiBold uppercase>\n              {t(\"diffTool.exit\")}\n            </Text>\n          </RawButton>\n          <Spacing right={4} />\n          <RawButton onClick={() => setShowChildren(!showChildren)}>\n            <Box paddedRatio={1} centered>\n              <StyledIcon\n                styledWidth=\"12px\"\n                light\n                glyph={showChildren ? GLYPHS.opened : GLYPHS.closed}\n              />\n            </Box>\n          </RawButton>\n        </Box>\n      </DiffAccordionToggle>\n      {showChildren && props.children}\n    </DiffAccordionWrapper>\n  );\n};\n\nconst DiffAccordionWrapper = styled(Box).attrs({\n  column: true,\n  position: \"absolute\",\n  styledWidth: \"340px\"\n  // charcoalGreyBg: true\n})<{ isMapFullScreen: boolean }>`\n  top: 70px;\n  left: 0px;\n  min-height: 220px;\n  // background: ${p => p.theme.dark};\n  margin-left: ${props =>\n    props.isMapFullScreen ? 16 : parseInt(props.theme.workbenchWidth) + 40}px;\n  transition: margin-left 0.25s;\n`;\n\nconst MainPanel = styled(Box).attrs({\n  column: true,\n  overflowY: \"auto\",\n  paddedRatio: 2\n})<{ isMapFullScreen: boolean }>`\n  ${({ theme }) => theme.borderRadiusBottom(theme.radius40Button)}\n  background-color: ${p => p.theme.darkWithOverlay};\n`;\n\nconst BackButton = styled(Button).attrs({\n  secondary: true\n})``;\n\nconst CloseDifferenceButton = styled(Button)`\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  top: 18px;\n\n  padding: 0 20px;\n`;\n\nconst GenerateButton = styled(Button).attrs({\n  primary: true,\n  splitter: true,\n  fullWidth: true\n})``;\n\nconst Selector = (props: any) => (\n  <Box fullWidth column>\n    <label>\n      {/* <Text textLight>{props.label}:</Text> */}\n      <Text textLight css={\"p {margin: 0;}\"}>\n        {parseCustomMarkdownToReactWithOptions(`${props.label}:`, {\n          injectTermsAsTooltips: true,\n          tooltipTerms: props.viewState.terria.configParameters.helpContentTerms\n        })}\n      </Text>\n      <Spacing bottom={1} />\n      <Select {...props}>{props.children}</Select>\n      {props.spacingBottom && <Spacing bottom={2} />}\n    </label>\n  </Box>\n);\n\nconst AreaFilterSelection = (props: {\n  t: TFunction;\n  location?: LatLonHeight;\n  isPickingNewLocation: boolean;\n}) => {\n  const { t, location, isPickingNewLocation } = props;\n  let locationText = \"-\";\n  if (location) {\n    const { longitude, latitude } = prettifyCoordinates(\n      location.longitude,\n      location.latitude,\n      {\n        digits: 2\n      }\n    );\n    locationText = `${longitude} ${latitude}`;\n  }\n\n  return (\n    <Box\n      column\n      centered\n      styledMinWidth=\"230px\"\n      css={`\n        @media (max-width: ${(props: any) => props.theme.md}px) {\n          width: 100%;\n        }\n      `}\n    >\n      <Box centered>\n        <StyledIcon light styledWidth=\"16px\" glyph={GLYPHS.location2} />\n        <Spacing right={2} />\n        <Text textLight extraLarge>\n          {t(\"diffTool.labels.areaFilterSelection\")}\n        </Text>\n      </Box>\n      <Spacing bottom={3} />\n      <Box styledMinHeight=\"40px\">\n        {isPickingNewLocation ? (\n          <Text\n            textLight\n            extraExtraLarge\n            bold\n            // Using legacy Loader.jsx means we override at a higher level to inherit\n            // this fills tyle\n            css={`\n              fill: ${({ theme }: any) => theme.textLight};\n            `}\n          >\n            <Loader\n              light\n              message={`Querying ${location ? \"new\" : \"\"} position...`}\n            />\n          </Text>\n        ) : (\n          <Text textLight bold heading textAlignCenter>\n            {locationText}\n          </Text>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nconst LocationAndDatesDisplayBox = styled(Box).attrs({\n  column: true,\n  charcoalGreyBg: true\n})`\n  color: ${p => p.theme.textLight};\n  padding: 15px;\n  > ${Box}:first-child {\n    margin-bottom: 13px;\n  }\n  > div > div:first-child {\n    /* The labels */\n    margin-right: 5px;\n    min-width: 50px;\n  }\n`;\n\nconst LegendImage = function(props: any) {\n  return (\n    <img\n      {...props}\n      // Show the legend only if it loads successfully, so we start out hidden\n      style={{ display: \"none\", marginTop: \"4px\" }}\n      // @ts-ignore\n      onLoad={e => (e.target.style.display = \"block\")}\n      // @ts-ignore\n      onError={e => (e.target.style.display = \"none\")}\n    />\n  );\n};\n\nasync function createSplitItem(\n  sourceItem: DiffableItem,\n  splitDirection: ImagerySplitDirection\n): Promise<DiffableItem> {\n  const terria = sourceItem.terria;\n  const ref = new SplitItemReference(createGuid(), terria);\n  ref.setTrait(CommonStrata.user, \"splitSourceItemId\", sourceItem.uniqueId);\n  terria.addModel(ref);\n  await ref.loadReference();\n  return runInAction(() => {\n    if (ref.target === undefined) {\n      throw Error(\"failed to split item\");\n    }\n    const newItem = ref.target as DiffableItem;\n    newItem.setTrait(CommonStrata.user, \"show\", true);\n    newItem.setTrait(CommonStrata.user, \"splitDirection\", splitDirection);\n    newItem.setTrait(CommonStrata.user, \"currentTime\", null);\n    newItem.setTrait(CommonStrata.user, \"initialTimeSource\", \"none\");\n    if (hasOpacity(newItem)) {\n      // We want to show the item on the map only after date selection. At the\n      // same time we cannot set `show` to false because if we\n      // do so, date picking which relies on feature picking, will not work. So\n      // we simply set the opacity of the item to 0.\n      newItem.setTrait(CommonStrata.user, \"opacity\", 0);\n    }\n\n    setDefaultDiffStyle(newItem);\n\n    // Set the default style to true color style if it exists\n    const trueColor = newItem.styleSelectableDimensions?.[0]?.options?.find(\n      style => isDefined(style.name) && style.name.search(/true/i) >= 0\n    );\n    if (trueColor?.id) {\n      newItem.styleSelectableDimensions?.[0]?.setDimensionValue(\n        CommonStrata.user,\n        trueColor.id\n      );\n    }\n\n    terria.overlays.add(newItem);\n    return newItem;\n  });\n}\n\n/**\n * If the item has only one available diff style, auto-select it\n */\nfunction setDefaultDiffStyle(item: DiffableItem) {\n  if (item.diffStyleId !== undefined) {\n    return;\n  }\n\n  const availableStyles = filterOutUndefined(\n    item.availableDiffStyles.map(diffStyleId =>\n      item.styleSelectableDimensions?.[0]?.options?.find(\n        style => style.id === diffStyleId\n      )\n    )\n  );\n\n  if (availableStyles.length === 1) {\n    item.setTrait(CommonStrata.user, \"diffStyleId\", availableStyles[0].id);\n  }\n}\n\nfunction removeSplitItem(item: DiffableItem) {\n  const terria = item.terria;\n  terria.overlays.remove(item);\n  if (item.sourceReference && terria.workbench.contains(item) === false) {\n    terria.removeModelReferences(item.sourceReference);\n  }\n}\n\nfunction doesFeatureBelongToItem(\n  feature: Feature,\n  item: DiffableItem\n): Boolean {\n  if (!MappableMixin.isMixedInto(item)) return false;\n  const imageryProvider = feature.imageryLayer?.imageryProvider;\n  if (imageryProvider === undefined) return false;\n  return (\n    item.mapItems.find(\n      m => ImageryParts.is(m) && m.imageryProvider === imageryProvider\n    ) !== undefined\n  );\n}\n\nfunction setTimeFilterFromLocation(\n  item: DiffableItem,\n  location: LatLonHeight,\n  im: ImageryProvider\n): Promise<boolean> {\n  const carto = new Cartographic(\n    CesiumMath.toRadians(location.longitude),\n    CesiumMath.toRadians(location.latitude)\n  );\n  // We just need to set this to a high enough level supported by the service\n  const level = 30;\n  const tile = im.tilingScheme.positionToTileXY(carto, level);\n  return item.setTimeFilterFromLocation({\n    position: {\n      latitude: location.latitude,\n      longitude: location.longitude,\n      height: location.height\n    },\n    tileCoords: {\n      x: tile.x,\n      y: tile.y,\n      level\n    }\n  });\n}\n\nfunction hasOpacity(\n  model: any\n): model is HasTrait<RasterLayerTraits, \"opacity\"> {\n  return hasTraits(model, RasterLayerTraits, \"opacity\");\n}\n\nexport default hoistStatics(withTranslation()(withTheme(DiffTool)), DiffTool);\n","import { action, computed, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport JulianDate from \"terriajs-cesium/Source/Core/JulianDate\";\nimport DiffableMixin from \"../../../ModelMixins/DiffableMixin\";\nimport CommonStrata from \"../../../Models/Definition/CommonStrata\";\nimport { formatDateTime } from \"../../BottomDock/Timeline/DateFormats\";\nimport Icon, { StyledIcon } from \"../../../Styled/Icon\";\nimport DateTimePicker from \"../../BottomDock/Timeline/DateTimePicker\";\nimport Text, { TextSpan } from \"../../../Styled/Text\";\nimport Box from \"../../../Styled/Box\";\nimport Button from \"../../../Styled/Button\";\nimport Spacing from \"../../../Styled/Spacing\";\nconst dateFormat = require(\"dateformat\");\n\ninterface PropsType extends WithTranslation {\n  heading: string;\n  item: DiffableMixin.Instance;\n  externalOpenButton: React.RefObject<HTMLButtonElement>;\n  onDateSet: () => void;\n}\n\n@observer\nclass DatePicker extends React.Component<PropsType> {\n  @observable private isOpen = false;\n\n  @computed\n  get currentDate(): Date | undefined {\n    const date = this.props.item.currentDiscreteJulianDate;\n    return date && JulianDate.toDate(date);\n  }\n\n  @computed\n  get formattedCurrentDate() {\n    if (this.currentDate === undefined) {\n      return;\n    }\n    const dateFormatting = undefined; // TODO\n    const formattedDate =\n      dateFormatting !== undefined\n        ? dateFormat(this.currentDate, dateFormatting)\n        : formatDateTime(this.currentDate);\n    return formattedDate;\n  }\n\n  @action.bound\n  toggleOpen(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    this.isOpen = !this.isOpen;\n    // stopPropagation is required to prevent the datetime picker popup from closing when\n    // the date button is clicked\n    e.stopPropagation();\n  }\n\n  @action.bound\n  setIsOpen(isOpen: boolean) {\n    this.isOpen = isOpen;\n  }\n\n  @action.bound\n  changeCurrentDate(date: Date) {\n    this.props.item.setTrait(\n      CommonStrata.user,\n      \"currentTime\",\n      date.toISOString()\n    );\n    this.props.onDateSet();\n  }\n\n  @action.bound\n  moveToPreviousDate() {\n    this.props.item.moveToPreviousDiscreteTime(CommonStrata.user);\n    this.props.onDateSet();\n  }\n\n  @action.bound\n  moveToNextDate() {\n    this.props.item.moveToNextDiscreteTime(CommonStrata.user);\n    this.props.onDateSet();\n  }\n\n  @action.bound\n  onClickExternalButton(event: MouseEvent) {\n    this.setIsOpen(true);\n    // stopPropagation is required to prevent the datetime picker popup from closing when\n    // the external button is clicked\n    event.stopPropagation();\n  }\n\n  registerExternalButtonClick() {\n    this.props.externalOpenButton.current?.addEventListener(\n      \"click\",\n      this.onClickExternalButton\n    );\n  }\n\n  unregisterExternalButtonClick(\n    externalOpenButton: React.RefObject<HTMLButtonElement>\n  ) {\n    externalOpenButton.current?.removeEventListener(\n      \"click\",\n      this.onClickExternalButton\n    );\n  }\n\n  componentDidMount() {\n    this.registerExternalButtonClick();\n  }\n\n  componentDidUpdate(prevProps: PropsType) {\n    this.unregisterExternalButtonClick(prevProps.externalOpenButton);\n    this.registerExternalButtonClick();\n  }\n\n  componentWillUnmount() {\n    this.unregisterExternalButtonClick(this.props.externalOpenButton);\n  }\n\n  render() {\n    const { heading, item, t } = this.props;\n    return (\n      <Box column centered flex={1}>\n        <Spacing bottom={4} />\n        <Box centered>\n          <StyledIcon\n            light\n            styledWidth=\"21px\"\n            glyph={Icon.GLYPHS.calendar2}\n            css={\"margin-top:-2px;\"}\n          />\n          <Spacing right={2} />\n          <Text textLight extraLarge>\n            {heading}\n          </Text>\n        </Box>\n        <Spacing bottom={2} />\n        <Box>\n          <PrevButton\n            disabled={item.isPreviousDiscreteTimeAvailable === false}\n            title={t(\"diffTool.datePicker.previousDateTitle\")}\n            onClick={this.moveToPreviousDate}\n          />\n          <DateButton\n            primary\n            isOpen={this.isOpen}\n            onClick={this.toggleOpen}\n            title={t(\"diffTool.datePicker.dateButtonTitle\")}\n          >\n            <TextSpan extraLarge>{this.formattedCurrentDate || \"-\"}</TextSpan>\n          </DateButton>\n          <NextButton\n            disabled={item.isNextDiscreteTimeAvailable === false}\n            title={t(\"diffTool.datePicker.nextDateTitle\")}\n            onClick={this.moveToNextDate}\n          />\n        </Box>\n        <div\n          style={{\n            display: this.isOpen ? \"block\" : \"none\",\n            position: \"absolute\"\n          }}\n        >\n          <DateTimePicker\n            currentDate={this.currentDate}\n            dates={this.props.item.objectifiedDates}\n            onChange={this.changeCurrentDate}\n            openDirection=\"none\"\n            isOpen={this.isOpen}\n            onOpen={() => this.setIsOpen(true)}\n            onClose={() => this.setIsOpen(false)}\n          />\n        </div>\n        <Spacing bottom={4} />\n      </Box>\n    );\n  }\n}\n\nconst PagerButton = styled(Button).attrs({\n  iconProps: {\n    css: \"margin-right:0;\"\n  }\n})`\n  cursor: pointer;\n  background-color: ${props => props.theme.colorPrimary};\n  width: 40px;\n  border: 1px solid transparent;\n\n  ${({ theme }) => theme.centerWithFlex()}\n  flex-direction: column;\n`;\n\nconst PrevButton = styled(PagerButton).attrs({\n  renderIcon: () => (\n    <StyledIcon\n      css=\"transform:rotate(90deg);\"\n      light\n      styledWidth=\"15px\"\n      glyph={Icon.GLYPHS.arrowDown}\n    />\n  )\n})`\n  ${({ theme }) => theme.borderRadiusLeft(theme.radius40Button)}\n  margin-right: 1px;\n`;\n\nconst NextButton = styled(PagerButton).attrs({\n  renderIcon: () => (\n    <StyledIcon\n      css=\"transform:rotate(270deg);\"\n      light\n      styledWidth=\"15px\"\n      glyph={Icon.GLYPHS.arrowDown}\n    />\n  )\n})`\n  ${({ theme }) => theme.borderRadiusRight(theme.radius40Button)}\n  margin-left: 1px;\n`;\n\nconst DateButton = styled(Button)<{ isOpen: boolean }>`\n  // z-index: 1000; // (Nanda): So that we don't loose the button clicks to the date picker popup\n  z-index: 0;\n  ${props => props.isOpen && `z-index: 1000;`};\n\n  border-radius: 0px;\n  border: 1px solid ${props => props.theme.colorPrimary};\n\n  min-width: 235px;\n  @media (max-width: ${(props: any) => props.theme.lg}px) {\n    min-width: 150px;\n  }\n`;\n\nexport default withTranslation()(DatePicker);\n","import { action, observable, reaction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport Cartesian3 from \"terriajs-cesium/Source/Core/Cartesian3\";\nimport Ellipsoid from \"terriajs-cesium/Source/Core/Ellipsoid\";\nimport CesiumMath from \"terriajs-cesium/Source/Core/Math\";\nimport LatLonHeight from \"../../../Core/LatLonHeight\";\nimport PickedFeatures from \"../../../Map/PickedFeatures\";\nimport { addMarker, removeMarker } from \"../../../Models/LocationMarkerUtils\";\nimport MapInteractionMode, { UIMode } from \"../../../Models/MapInteractionMode\";\nimport Terria from \"../../../Models/Terria\";\nimport Loader from \"../../Loader\";\n\ninterface PropsType {\n  terria: Terria;\n  location?: LatLonHeight;\n  onPicking: (pickingLocation: LatLonHeight) => void;\n  onPicked: (\n    pickedFeatures: PickedFeatures,\n    pickedLocation: LatLonHeight\n  ) => void;\n}\n\n@observer\nexport default class LocationPicker extends React.Component<PropsType> {\n  @observable private pickMode?: MapInteractionMode;\n  @observable private currentPick?: PickedFeatures;\n  @observable private pickDisposer?: () => void;\n\n  @action\n  setupPicker() {\n    const { terria, location, onPicking, onPicked } = this.props;\n    this.pickMode = new MapInteractionMode({\n      message: \"\",\n      messageAsNode: <div></div>,\n      uiMode: UIMode.Difference\n    });\n    addInteractionModeToMap(terria, this.pickMode);\n    if (location) showMarker(terria, location);\n\n    this.pickDisposer = reaction(\n      () => this.pickMode!.pickedFeatures,\n      action((newPick: PickedFeatures | undefined) => {\n        if (newPick === undefined || newPick.pickPosition === undefined) {\n          return;\n        }\n\n        this.pickMode!.customUi = () => (\n          <Loader message={`Querying ${location ? \"new\" : \"\"} position...`} />\n        );\n\n        const position = cartesianToDegrees(newPick.pickPosition);\n        showMarker(this.props.terria, position);\n\n        this.currentPick = newPick;\n        onPicking(position);\n        newPick.allFeaturesAvailablePromise?.then(() => {\n          if (newPick === this.currentPick) {\n            onPicked(newPick, position);\n          }\n        });\n      })\n    );\n  }\n\n  @action\n  destroyPicker() {\n    const { terria } = this.props;\n    if (this.pickMode) {\n      removeInteractionModeFromMap(terria, this.pickMode);\n    }\n    removeMarker(terria);\n    this.pickMode = undefined;\n    this.currentPick = undefined;\n    this.pickDisposer?.();\n    this.pickDisposer = undefined;\n  }\n\n  componentDidMount() {\n    this.setupPicker();\n  }\n\n  componentDidUpdate() {\n    this.destroyPicker();\n    this.setupPicker();\n  }\n\n  componentWillUnmount() {\n    this.destroyPicker();\n  }\n\n  render() {\n    return null;\n  }\n}\n\nfunction addInteractionModeToMap(terria: Terria, mode: MapInteractionMode) {\n  terria.mapInteractionModeStack.push(mode);\n}\n\nfunction removeInteractionModeFromMap(\n  terria: Terria,\n  mode: MapInteractionMode\n) {\n  const [currentMode] = terria.mapInteractionModeStack.slice(-1);\n  if (currentMode === mode) {\n    terria.mapInteractionModeStack.pop();\n  }\n}\n\nfunction showMarker(terria: Terria, location: LatLonHeight) {\n  addMarker(terria, {\n    name: \"User selection\",\n    location,\n    customMarkerIcon: require(\"../../../../wwwroot/images/difference-pin.png\")\n  });\n}\n\nfunction cartesianToDegrees(cartesian: Cartesian3) {\n  const carto = Ellipsoid.WGS84.cartesianToCartographic(cartesian);\n  return {\n    longitude: CesiumMath.toDegrees(carto.longitude),\n    latitude: CesiumMath.toDegrees(carto.latitude)\n  };\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAA2CAYAAAAyEzKAAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGaADAAQAAAABAAAANgAAAAAbYi+LAAADOUlEQVRYCe1YPWgUQRT+3pEoqEWilSRBjSGNWKhga7DwBwTRKgqChXVM0igKGhRMFCXRQhsbFWOlIAhBm5ythRaCmCBGBAmIwRSx0EjW783tbnb3Zvbn7gqLe7A3M9977/tm3s7OLidIMW8QuyE4ihW2wA5em3it5/WL+A94+IAS3rJ9LhNsHSZJ3POYPoSTxC8xuTfpd44Fs/RdwTgmRZgZsZiIN4QOup/x2huJKdYVvOE0j8s4vgWJoQgFdpJ8ildH4Ky5FQoIDlPovXIYEW8EG7CIdxToqZk4mSj4hDbskhEslYxvETcbKqCkOmHlpQnLtJHAPK81CjTUBH9Yq80tJO3PJSD4wthH3LKz3NK6604xbytbt+nEBf0tDDzkjgo9L1jfE1rfAOF9vIGfeMLxkQCztuTXe9Jlda6CC1iH01EBdZkxcXYXdJxiXSrSmRKgrrKM2ol8vJyR36kieky4TfDd7aQny0/+Eu/Jx1QSYE9dfvLrSqZSSXjEcJsfs8UYPPsImtLnpIdbUg+38IipIhSeusA5dOO+DOC3dwdr8RlniF1nJdLK7XHL91aOlUFMM7ivirwaWCb0ldPZwnh9xrJsWm5jv5ZLj4C7WdG+v5Xt9pwCmnJPfyoi7XjK2c0o0DBTPuWlGRE+WCuc3bWGCSgR+QxvIGLI2zHJds706/+Z4yqUz1ilXOxS9S9LdtnH62vIY/h8llDEjNvwmELmbVaziuYrT8RiIqaGJZyP+It3mW94IpnWB5CfQmXeuH2RuHxdwWt+GvUlg2MriTiHWbaVyDi7W4kftgVaRfwPtYe2BCfm4YHrA88q4hNdYBu+CZ3kFccSV37RFeMU4azmmTjmSozhJYya+Bi4OnCKmJBuftIIz9s0U/823EoLSRXRY50i1psZktJv4kKgumPdwskwbumX3NIHkjgn8IplOliFJ4DUlYSxHgbY13dJ1JYprHim5RLhi2eG5/VEjI1jg8dA+yCXiEltxdUYRXIcc8YHue5JkOKdZYF84ypy5+ZfScBeQ9sUKVS0Zrma5SpUgULBzd3VLFehChQK/g93l/7roxa0OddTbCWe+f9qiS9h8z9WTg38A1O1vXOERmoNAAAAAElFTkSuQmCC\""],"sourceRoot":""}